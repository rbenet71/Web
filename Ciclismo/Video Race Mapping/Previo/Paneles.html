<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard con Paneles Redimensionables</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --bg-color: #f8f9fa;
            --border-color: #ddd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            height: 100vh;
            overflow: hidden;
        }
        
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            padding: 10px;
            gap: 10px;
        }
        
        .header {
            background: var(--primary-color);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .header h1 {
            font-size: 1.5rem;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .panels-container {
            flex: 1;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 10px;
            transition: grid-template-columns 0.3s, grid-template-rows 0.3s;
        }
        
        .panel {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .panel-header {
            background: var(--primary-color);
            color: white;
            padding: 12px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
        }
        
        .panel-title {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .panel-controls {
            display: flex;
            gap: 8px;
        }
        
        .panel-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 28px;
            height: 28px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        
        .panel-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .panel-content {
            flex: 1;
            padding: 15px;
            overflow: auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Contenidos espec√≠ficos de cada panel */
        .video-panel .panel-content {
            background: #000;
            color: white;
            font-size: 1.2rem;
            flex-direction: column;
            gap: 15px;
        }
        
        .video-placeholder {
            width: 80%;
            height: 150px;
            background: linear-gradient(45deg, #333, #666);
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
        }
        
        .map-panel .panel-content {
            background: #e8f4fc;
            color: #2c3e50;
        }
        
        .map-placeholder {
            width: 90%;
            height: 80%;
            background: linear-gradient(135deg, #a8e6cf, #dcedc1);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #4CAF50;
        }
        
        .profile-panel .panel-content {
            background: #f9f7f7;
            color: #2c3e50;
        }
        
        .profile-placeholder {
            width: 90%;
            height: 80%;
            background: linear-gradient(135deg, #ffd3b6, #ffaaa5);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #ff8b94;
        }
        
        .table-panel .panel-content {
            background: #fff;
            color: #2c3e50;
        }
        
        .table-placeholder {
            width: 95%;
            height: 90%;
            background: linear-gradient(135deg, #d9e4f5, #f5e6e8);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px dashed #7e8aa2;
            overflow: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 8px 12px;
            border: 1px solid #ddd;
            text-align: left;
        }
        
        th {
            background: #f2f2f2;
            font-weight: 600;
        }
        
        /* Modos de visualizaci√≥n */
        .panel.maximized {
            position: fixed !important;
            top: 10px !important;
            left: 10px !important;
            right: 10px !important;
            bottom: 10px !important;
            width: auto !important;
            height: auto !important;
            z-index: 1000;
            grid-column: 1 / -1 !important;
            grid-row: 1 / -1 !important;
        }
        
        .panel.hidden {
            display: none !important;
        }
        
        .panel.half-width {
            grid-column: span 2 !important;
        }
        
        .panel.half-height {
            grid-row: span 1 !important;
        }
        
        .panel.full-height {
            grid-row: span 2 !important;
        }
        
        /* Divider para redimensionar */
        .divider {
            position: absolute;
            z-index: 10;
            background: transparent;
        }
        
        .divider.vertical {
            width: 10px;
            cursor: col-resize;
            right: -5px;
            top: 0;
            bottom: 0;
        }
        
        .divider.horizontal {
            height: 10px;
            cursor: row-resize;
            bottom: -5px;
            left: 0;
            right: 0;
        }
        
        .controls-container {
            display: flex;
            gap: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            flex-wrap: wrap;
        }
        
        .preset-btn {
            padding: 10px 15px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: background 0.2s;
        }
        
        .preset-btn:hover {
            background: #2980b9;
        }
        
        .video-focus {
            background: #e74c3c;
        }
        
        .map-focus {
            background: #2ecc71;
        }
        
        .profile-focus {
            background: #f39c12;
        }
        
        .table-focus {
            background: #9b59b6;
        }
        
        .reset-btn {
            background: #7f8c8d;
        }
        
        .instructions {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 6px;
            padding: 12px 15px;
            margin-top: 10px;
            font-size: 0.9rem;
            color: #856404;
        }
        
        .instructions h3 {
            margin-bottom: 8px;
            color: #856404;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>üìä Dashboard de Monitorizaci√≥n</h1>
            <p>V√≠deo, mapa, perfil y tabla - Cambia el foco seg√∫n tus necesidades</p>
        </div>
        
        <div class="controls-container">
            <button class="preset-btn video-focus" onclick="setFocus('video')">
                üé• Foco en V√≠deo
            </button>
            <button class="preset-btn map-focus" onclick="setFocus('map')">
                üó∫Ô∏è Foco en Mapa
            </button>
            <button class="preset-btn profile-focus" onclick="setFocus('profile')">
                üìà Foco en Perfil
            </button>
            <button class="preset-btn table-focus" onclick="setFocus('table')">
                üìã Foco en Tabla
            </button>
            <button class="preset-btn reset-btn" onclick="resetLayout()">
                üîÑ Restaurar Dise√±o
            </button>
        </div>
        
        <div class="panels-container" id="panelsContainer">
            <!-- Panel de V√≠deo -->
            <div class="panel video-panel" id="videoPanel">
                <div class="panel-header" onmousedown="startDrag(event, 'videoPanel')">
                    <div class="panel-title">üé• Reproducci√≥n de V√≠deo</div>
                    <div class="panel-controls">
                        <button class="panel-btn" onclick="toggleMaximize('videoPanel')">‚¨ú</button>
                        <button class="panel-btn" onclick="togglePanel('videoPanel')">üóï</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="video-placeholder">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 10px;">‚ñ∂Ô∏è</div>
                            <div>V√≠deo en reproducci√≥n</div>
                            <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">00:45 / 12:30</div>
                        </div>
                    </div>
                </div>
                <div class="divider vertical" onmousedown="startResize(event, 'videoPanel', 'horizontal')"></div>
                <div class="divider horizontal" onmousedown="startResize(event, 'videoPanel', 'vertical')"></div>
            </div>
            
            <!-- Panel de Mapa -->
            <div class="panel map-panel" id="mapPanel">
                <div class="panel-header" onmousedown="startDrag(event, 'mapPanel')">
                    <div class="panel-title">üó∫Ô∏è Mapa del Recorrido</div>
                    <div class="panel-controls">
                        <button class="panel-btn" onclick="toggleMaximize('mapPanel')">‚¨ú</button>
                        <button class="panel-btn" onclick="togglePanel('mapPanel')">üóï</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="map-placeholder">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 10px;">üó∫Ô∏è</div>
                            <div>Mapa interactivo</div>
                            <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">Ruta en tiempo real</div>
                        </div>
                    </div>
                </div>
                <div class="divider vertical" onmousedown="startResize(event, 'mapPanel', 'horizontal')"></div>
                <div class="divider horizontal" onmousedown="startResize(event, 'mapPanel', 'vertical')"></div>
            </div>
            
            <!-- Panel de Perfil -->
            <div class="panel profile-panel" id="profilePanel">
                <div class="panel-header" onmousedown="startDrag(event, 'profilePanel')">
                    <div class="panel-title">üìà Perfil del Recorrido</div>
                    <div class="panel-controls">
                        <button class="panel-btn" onclick="toggleMaximize('profilePanel')">‚¨ú</button>
                        <button class="panel-btn" onclick="togglePanel('profilePanel')">üóï</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="profile-placeholder">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 10px;">üìä</div>
                            <div>Gr√°fico de elevaci√≥n</div>
                            <div style="font-size: 0.8rem; opacity: 0.8; margin-top: 5px;">Distancia vs Altitud</div>
                        </div>
                    </div>
                </div>
                <div class="divider vertical" onmousedown="startResize(event, 'profilePanel', 'horizontal')"></div>
                <div class="divider horizontal" onmousedown="startResize(event, 'profilePanel', 'vertical')"></div>
            </div>
            
            <!-- Panel de Tabla -->
            <div class="panel table-panel" id="tablePanel">
                <div class="panel-header" onmousedown="startDrag(event, 'tablePanel')">
                    <div class="panel-title">üìã Datos del Recorrido</div>
                    <div class="panel-controls">
                        <button class="panel-btn" onclick="toggleMaximize('tablePanel')">‚¨ú</button>
                        <button class="panel-btn" onclick="togglePanel('tablePanel')">üóï</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="table-placeholder">
                        <table>
                            <thead>
                                <tr>
                                    <th>Tiempo</th>
                                    <th>Ubicaci√≥n</th>
                                    <th>Velocidad</th>
                                    <th>Elevaci√≥n</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr><td>00:00</td><td>Inicio</td><td>0 km/h</td><td>100m</td></tr>
                                <tr><td>00:10</td><td>Punto A</td><td>15 km/h</td><td>120m</td></tr>
                                <tr><td>00:25</td><td>Punto B</td><td>22 km/h</td><td>150m</td></tr>
                                <tr><td>00:40</td><td>Punto C</td><td>18 km/h</td><td>130m</td></tr>
                                <tr><td>00:45</td><td>Actual</td><td>20 km/h</td><td>125m</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="divider vertical" onmousedown="startResize(event, 'tablePanel', 'horizontal')"></div>
                <div class="divider horizontal" onmousedown="startResize(event, 'tablePanel', 'vertical')"></div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>üìñ C√≥mo usar este dashboard:</h3>
            <ul>
                <li>Usa los botones de <strong>"Foco en..."</strong> para priorizar diferentes paneles</li>
                <li><strong>Arrastra</strong> los paneles desde su cabecera para reorganizarlos</li>
                <li><strong>Redimensiona</strong> arrastrando desde los bordes de cada panel</li>
                <li>Haz clic en <strong>‚¨ú</strong> para maximizar un panel</li>
                <li>Haz clic en <strong>üóï</strong> para minimizar/ocultar un panel</li>
                <li>Usa <strong>üîÑ Restaurar Dise√±o</strong> para volver al estado inicial</li>
            </ul>
        </div>
    </div>

    <script>
        // Estado inicial del layout
        let originalLayout = null;
        let activePanel = null;
        let isDragging = false;
        let isResizing = false;
        let currentPanel = null;
        let resizeDirection = null;
        let startX, startY, startWidth, startHeight;
        
        // Guardar el layout original al cargar
        document.addEventListener('DOMContentLoaded', () => {
            saveOriginalLayout();
            
            // Configurar eventos globales
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);
        });
        
        function saveOriginalLayout() {
            originalLayout = {
                video: getPanelState('videoPanel'),
                map: getPanelState('mapPanel'),
                profile: getPanelState('profilePanel'),
                table: getPanelState('tablePanel')
            };
        }
        
        function getPanelState(panelId) {
            const panel = document.getElementById(panelId);
            const style = window.getComputedStyle(panel);
            
            return {
                gridColumn: style.gridColumn,
                gridRow: style.gridRow,
                order: style.order,
                isHidden: panel.classList.contains('hidden')
            };
        }
        
        function setPanelState(panelId, state) {
            const panel = document.getElementById(panelId);
            
            panel.style.gridColumn = state.gridColumn;
            panel.style.gridRow = state.gridRow;
            panel.style.order = state.order;
            
            if (state.isHidden) {
                panel.classList.add('hidden');
            } else {
                panel.classList.remove('hidden');
            }
        }
        
        // Funciones para cambiar el foco
        function setFocus(panelType) {
            // Resetear todos los paneles primero
            resetPanelStyles();
            
            const panels = {
                video: document.getElementById('videoPanel'),
                map: document.getElementById('mapPanel'),
                profile: document.getElementById('profilePanel'),
                table: document.getElementById('tablePanel')
            };
            
            // Aplicar el layout seg√∫n el foco seleccionado
            switch(panelType) {
                case 'video':
                    // V√≠deo ocupa la mitad izquierda, otros a la derecha
                    panels.video.style.gridColumn = '1 / 3';
                    panels.video.style.gridRow = '1 / 3';
                    panels.map.style.gridColumn = '3 / 4';
                    panels.map.style.gridRow = '1 / 2';
                    panels.profile.style.gridColumn = '3 / 4';
                    panels.profile.style.gridRow = '2 / 3';
                    panels.table.style.gridColumn = '4 / 5';
                    panels.table.style.gridRow = '1 / 3';
                    activePanel = 'video';
                    break;
                    
                case 'map':
                    // Mapa grande en el centro, otros alrededor
                    panels.video.style.gridColumn = '1 / 3';
                    panels.video.style.gridRow = '1 / 2';
                    panels.map.style.gridColumn = '2 / 4';
                    panels.map.style.gridRow = '1 / 3';
                    panels.profile.style.gridColumn = '1 / 2';
                    panels.profile.style.gridRow = '2 / 3';
                    panels.table.style.gridColumn = '4 / 5';
                    panels.table.style.gridRow = '1 / 3';
                    activePanel = 'map';
                    break;
                    
                case 'profile':
                    // Perfil grande, otros peque√±os
                    panels.video.style.gridColumn = '1 / 2';
                    panels.video.style.gridRow = '1 / 3';
                    panels.map.style.gridColumn = '2 / 3';
                    panels.map.style.gridRow = '1 / 2';
                    panels.profile.style.gridColumn = '3 / 5';
                    panels.profile.style.gridRow = '1 / 3';
                    panels.table.style.gridColumn = '2 / 3';
                    panels.table.style.gridRow = '2 / 3';
                    activePanel = 'profile';
                    break;
                    
                case 'table':
                    // Tabla grande, otros peque√±os
                    panels.video.style.gridColumn = '1 / 2';
                    panels.video.style.gridRow = '1 / 2';
                    panels.map.style.gridColumn = '1 / 2';
                    panels.map.style.gridRow = '2 / 3';
                    panels.profile.style.gridColumn = '2 / 3';
                    panels.profile.style.gridRow = '1 / 3';
                    panels.table.style.gridColumn = '3 / 5';
                    panels.table.style.gridRow = '1 / 3';
                    activePanel = 'table';
                    break;
            }
        }
        
        function resetPanelStyles() {
            const panels = document.querySelectorAll('.panel');
            panels.forEach(panel => {
                panel.style.gridColumn = '';
                panel.style.gridRow = '';
                panel.style.order = '';
                panel.classList.remove('maximized', 'half-width', 'half-height', 'full-height');
            });
        }
        
        function resetLayout() {
            resetPanelStyles();
            activePanel = null;
        }
        
        // Funciones de interacci√≥n
        function startDrag(e, panelId) {
            e.preventDefault();
            isDragging = true;
            currentPanel = document.getElementById(panelId);
            
            // Traer al frente
            document.querySelectorAll('.panel').forEach(p => {
                p.style.zIndex = 1;
            });
            currentPanel.style.zIndex = 100;
        }
        
        function startResize(e, panelId, direction) {
            e.preventDefault();
            e.stopPropagation();
            
            isResizing = true;
            resizeDirection = direction;
            currentPanel = document.getElementById(panelId);
            startX = e.clientX;
            startY = e.clientY;
            
            const rect = currentPanel.getBoundingClientRect();
            startWidth = rect.width;
            startHeight = rect.height;
            
            // Traer al frente
            currentPanel.style.zIndex = 100;
        }
        
        function handleMouseMove(e) {
            if (isResizing && currentPanel) {
                e.preventDefault();
                
                const deltaX = e.clientX - startX;
                const deltaY = e.clientY - startY;
                
                // Calcular nuevas dimensiones basadas en la direcci√≥n
                const container = document.getElementById('panelsContainer');
                const containerRect = container.getBoundingClientRect();
                const panelRect = currentPanel.getBoundingClientRect();
                
                if (resizeDirection === 'horizontal') {
                    const newWidth = Math.max(200, startWidth + deltaX);
                    const gridColumns = container.style.gridTemplateColumns || 'repeat(4, 1fr)';
                    const colWidth = containerRect.width / 4;
                    const cols = Math.max(1, Math.round(newWidth / colWidth));
                    
                    currentPanel.style.gridColumn = `span ${cols}`;
                } else if (resizeDirection === 'vertical') {
                    const newHeight = Math.max(150, startHeight + deltaY);
                    const gridRows = container.style.gridTemplateRows || 'repeat(2, 1fr)';
                    const rowHeight = containerRect.height / 2;
                    const rows = Math.max(1, Math.round(newHeight / rowHeight));
                    
                    currentPanel.style.gridRow = `span ${rows}`;
                }
            }
        }
        
        function handleMouseUp() {
            isDragging = false;
            isResizing = false;
            resizeDirection = null;
            
            if (currentPanel) {
                currentPanel.style.zIndex = '';
            }
            currentPanel = null;
        }
        
        function toggleMaximize(panelId) {
            const panel = document.getElementById(panelId);
            panel.classList.toggle('maximized');
        }
        
        function togglePanel(panelId) {
            const panel = document.getElementById(panelId);
            panel.classList.toggle('hidden');
        }
        
        // Atajos de teclado
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey) {
                switch(e.key) {
                    case '1': setFocus('video'); break;
                    case '2': setFocus('map'); break;
                    case '3': setFocus('profile'); break;
                    case '4': setFocus('table'); break;
                    case '0': resetLayout(); break;
                }
            }
        });
    </script>
</body>
</html>